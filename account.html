<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AI Receptionist — Your Account</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a class="brand" href="index.html" aria-label="TheBest AiReceptionist">
          <svg class="brand-logo-svg" viewBox="0 0 520 140" role="img">
            <rect width="520" height="140" fill="var(--bg)"></rect>
            <g transform="translate(18,16)">
              <ellipse
                cx="64"
                cy="46"
                rx="56"
                ry="22"
                fill="none"
                stroke="var(--logo-teal)"
                stroke-width="4"
              ></ellipse>
              <circle cx="20" cy="46" r="6" fill="var(--logo-teal)"></circle>
              <circle cx="108" cy="46" r="6" fill="var(--logo-teal)"></circle>
              <circle cx="64" cy="24" r="7" fill="var(--logo-teal)"></circle>
              <circle cx="88" cy="30" r="4" fill="var(--logo-teal)"></circle>
              <circle
                cx="64"
                cy="78"
                r="36"
                fill="#ffffff"
                stroke="var(--logo-navy)"
                stroke-width="4"
              ></circle>
              <rect
                x="46"
                y="60"
                width="36"
                height="16"
                rx="8"
                fill="var(--logo-teal)"
                opacity="0.85"
              ></rect>
              <circle cx="52" cy="78" r="5" fill="var(--logo-navy)"></circle>
              <circle cx="76" cy="78" r="5" fill="var(--logo-navy)"></circle>
              <circle
                cx="28"
                cy="78"
                r="10"
                fill="var(--logo-light)"
                stroke="var(--logo-navy)"
                stroke-width="4"
              ></circle>
              <circle
                cx="100"
                cy="78"
                r="10"
                fill="var(--logo-light)"
                stroke="var(--logo-navy)"
                stroke-width="4"
              ></circle>
              <line
                x1="36"
                y1="92"
                x2="20"
                y2="102"
                stroke="var(--logo-navy)"
                stroke-width="4"
                stroke-linecap="round"
              ></line>
              <circle cx="16" cy="104" r="4" fill="var(--logo-teal)"></circle>
            </g>
            <g transform="translate(150,32)" font-family="Manrope, sans-serif">
              <text
                x="0"
                y="24"
                font-size="28"
                font-weight="700"
                fill="var(--logo-navy)"
                letter-spacing="1"
              >
                THEBEST
              </text>
              <text x="0" y="78" font-size="44" font-weight="800">
                <tspan fill="var(--logo-teal)">Ai</tspan>
                <tspan fill="var(--logo-navy)">Receptionist</tspan>
              </text>
            </g>
          </svg>
        </a>
        <nav class="site-nav">
          <a href="how-it-works.html">How It Works</a>
          <a href="pricing.html">Pricing</a>
          <a href="faq.html">FAQs</a>
          <a href="contact.html">Contact</a>
          <a href="index.html#demo" class="nav-cta">Book Demo</a>
          <a href="login.html" class="nav-auth secondary">Login</a>
          <a href="signup.html" class="nav-auth">Sign Up</a>
        </nav>
      </div>
    </header>

    <main>
      <section class="page-hero">
        <div class="container">
          <h1>Your Account</h1>
          <p class="lead">View your plan and payment details.</p>
        </div>
      </section>

      <section class="section">
        <div class="container account-grid">
          <div class="account-card" id="account-summary">
            <h3>Account Summary</h3>
            <p class="muted">No account data found.</p>
            <a class="secondary-btn" href="signup.html">Create Account</a>
          </div>
          <div class="account-card" id="billing-card">
            <h3>Payments</h3>
            <div class="account-line">
              <span>Payment Method</span>
              <strong>Not added</strong>
            </div>
            <div class="account-line">
              <span>Next Billing Date</span>
              <strong>—</strong>
            </div>
            <button class="secondary-btn">Add Payment Method</button>
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container">
        <p>Ready to stop missing calls? Book a free demo today.</p>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase.js"></script>
    <script>
      const summary = document.getElementById("account-summary");
      const billingCard = document.getElementById("billing-card");

      const renderLoggedOut = () => {
        summary.innerHTML = `
          <h3>Account Summary</h3>
          <p class="muted">No account data found.</p>
          <a class="secondary-btn" href="signup.html">Create Account</a>
        `;
      };

      const renderLoggedIn = (profile, email) => {
        summary.innerHTML = `
          <h3>Account Summary</h3>
          <div class="account-line"><span>Name</span><strong>${profile?.name || "—"}</strong></div>
          <div class="account-line"><span>Email</span><strong>${email || "—"}</strong></div>
          <div class="account-line"><span>Phone</span><strong>${profile?.phone || "—"}</strong></div>
          <div class="account-line"><span>Business</span><strong>${profile?.business || "—"}</strong></div>
          <div class="account-line"><span>Plan</span><strong>${profile?.plan || "No plan yet"}</strong></div>
          <button class="secondary-btn" id="logout-btn">Log Out</button>
        `;

        billingCard.innerHTML = `
          <h3>Payments</h3>
          <div class="account-line"><span>Payment Method</span><strong>Visa •••• 4242</strong></div>
          <div class="account-line"><span>Next Billing Date</span><strong>—</strong></div>
          <div class="account-line"><span>Status</span><strong>Active</strong></div>
          <p class="muted">Stripe billing will sync here once connected.</p>
          <button class="secondary-btn">Update Payment Method</button>
        `;

        const logoutBtn = document.getElementById("logout-btn");
        if (logoutBtn) {
          logoutBtn.addEventListener("click", async () => {
            await window.supabaseClient.auth.signOut();
            window.location.href = "login.html";
          });
        }
      };

      const loadAccount = async () => {
        if (!window.supabaseClient) {
          renderLoggedOut();
          return;
        }
        const { data: sessionData } =
          await window.supabaseClient.auth.getSession();
        const session = sessionData?.session;
        if (!session) {
          renderLoggedOut();
          return;
        }
        const userId = session.user.id;
        const { data: profile } = await window.supabaseClient
          .from("profiles")
          .select("name, phone, business, plan")
          .eq("id", userId)
          .single();
        renderLoggedIn(profile, session.user.email);
      };

      loadAccount();
    </script>
    <script src="app.js"></script>
  </body>
</html>
