<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AI Receptionist â€” Login / Signup</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a class="brand" href="index.html" aria-label="TheBest AiReceptionist">
          <svg class="brand-logo-svg" viewBox="0 0 520 140" role="img">
            <rect width="520" height="140" fill="var(--bg)"></rect>
            <g transform="translate(18,16)">
              <ellipse
                cx="64"
                cy="46"
                rx="56"
                ry="22"
                fill="none"
                stroke="var(--logo-teal)"
                stroke-width="4"
              ></ellipse>
              <circle cx="20" cy="46" r="6" fill="var(--logo-teal)"></circle>
              <circle cx="108" cy="46" r="6" fill="var(--logo-teal)"></circle>
              <circle cx="64" cy="24" r="7" fill="var(--logo-teal)"></circle>
              <circle cx="88" cy="30" r="4" fill="var(--logo-teal)"></circle>
              <circle
                cx="64"
                cy="78"
                r="36"
                fill="#ffffff"
                stroke="var(--logo-navy)"
                stroke-width="4"
              ></circle>
              <rect
                x="46"
                y="60"
                width="36"
                height="16"
                rx="8"
                fill="var(--logo-teal)"
                opacity="0.85"
              ></rect>
              <circle cx="52" cy="78" r="5" fill="var(--logo-navy)"></circle>
              <circle cx="76" cy="78" r="5" fill="var(--logo-navy)"></circle>
              <circle
                cx="28"
                cy="78"
                r="10"
                fill="var(--logo-light)"
                stroke="var(--logo-navy)"
                stroke-width="4"
              ></circle>
              <circle
                cx="100"
                cy="78"
                r="10"
                fill="var(--logo-light)"
                stroke="var(--logo-navy)"
                stroke-width="4"
              ></circle>
              <line
                x1="36"
                y1="92"
                x2="20"
                y2="102"
                stroke="var(--logo-navy)"
                stroke-width="4"
                stroke-linecap="round"
              ></line>
              <circle cx="16" cy="104" r="4" fill="var(--logo-teal)"></circle>
            </g>
            <g transform="translate(150,32)" font-family="Manrope, sans-serif">
              <text
                x="0"
                y="24"
                font-size="28"
                font-weight="700"
                fill="var(--logo-navy)"
                letter-spacing="1"
              >
                THEBEST
              </text>
              <text x="0" y="78" font-size="44" font-weight="800">
                <tspan fill="var(--logo-teal)">Ai</tspan>
                <tspan fill="var(--logo-navy)">Receptionist</tspan>
              </text>
            </g>
          </svg>
        </a>
        <nav class="site-nav">
          <a href="how-it-works.html">How It Works</a>
          <a href="pricing.html">Pricing</a>
          <a href="faq.html">FAQs</a>
          <a href="contact.html">Contact</a>
          <a href="index.html#demo" class="nav-cta">Book Demo</a>
          <a href="signup.html" class="nav-login">Login / Signup</a>
        </nav>
      </div>
    </header>

    <main>
      <section class="page-hero">
        <div class="container">
          <h1>Create Your Account</h1>
          <p class="lead">Set up your AI receptionist in minutes.</p>
        </div>
      </section>

      <section class="section auth">
        <div class="container auth-grid single">
          <div class="auth-card">
            <div class="auth-header">
              <h3>Signup</h3>
              <span class="plan-pill" id="plan-pill">Plan: Not selected</span>
            </div>
            <form class="plain-form" id="signup-form">
              <div class="form-grid">
                <label>
                  Full Name
                  <input type="text" name="name" placeholder="Jane Smith" required />
                </label>
                <label>
                  Email
                  <input
                    type="email"
                    name="email"
                    placeholder="janesmith@email.com"
                    required
                  />
                </label>
                <label>
                  Phone
                  <input type="tel" name="phone" placeholder="(555) 123-4567" />
                </label>
                <label>
                  Business Name
                  <input
                    type="text"
                    name="business"
                    placeholder="Studio Bloom"
                    required
                  />
                </label>
                <label>
                  Password
                  <input type="password" name="password" required />
                </label>
                <label>
                  Confirm Password
                  <input type="password" name="confirm" required />
                </label>
                <label class="full">
                  Select Plan
                  <select id="plan-input" name="plan">
                    <option value="">No plan yet</option>
                    <option value="Essentials">Essentials</option>
                    <option value="Growth">Growth</option>
                    <option value="Business">Business</option>
                  </select>
                </label>
              </div>
              <p class="form-note">
                Account data is stored in your browser for this demo.
              </p>
              <div class="form-actions">
                <button class="primary-btn" type="submit">Create Account</button>
              </div>
              <p class="form-error" id="signup-error" aria-live="polite"></p>
              <p class="form-success" id="signup-success" aria-live="polite"></p>
              <div class="oauth-row">
                <button class="secondary-btn" type="button" id="google-signup">
                  <span class="google-icon" aria-hidden="true"></span>
                  Continue with Google
                </button>
              </div>
              <p class="muted link-row">
                Already have an account?
                <a href="login.html">Log in</a>
              </p>
            </form>
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container">
        <p>Ready to stop missing calls? Book a free demo today.</p>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase.js"></script>
    <script>
      const params = new URLSearchParams(window.location.search);
      const plan = params.get("plan") || "";
      const planInput = document.getElementById("plan-input");
      const planPill = document.getElementById("plan-pill");
      if (planInput) planInput.value = plan;
      if (planPill) {
        planPill.textContent = `Plan: ${plan || "No plan yet"}`;
      }
      if (planInput && planPill) {
        planInput.addEventListener("change", () => {
          const value = planInput.value || "No plan yet";
          planPill.textContent = `Plan: ${value}`;
        });
      }

      const signupForm = document.getElementById("signup-form");
      const signupError = document.getElementById("signup-error");
      const signupSuccess = document.getElementById("signup-success");
      const googleSignupBtn = document.getElementById("google-signup");
      if (signupForm) {
        signupForm.addEventListener("submit", async (event) => {
          event.preventDefault();
          const data = new FormData(signupForm);
          const password = data.get("password");
          const confirm = data.get("confirm");
          if (password !== confirm) {
            signupError.textContent = "Passwords do not match.";
            return;
          }
          signupError.textContent = "";
          signupSuccess.textContent = "";
          const email = data.get("email");
          const redirectTo = `${window.location.origin}/account.html`;
          const { data: signUpData, error } =
            await window.supabaseClient.auth.signUp({
              email,
              password,
              options: { emailRedirectTo: redirectTo },
            });
          if (error) {
            signupError.textContent = error.message;
            return;
          }
          const userId = signUpData.user?.id;
          if (userId) {
            const { error: profileError } =
              await window.supabaseClient.from("profiles").upsert({
                id: userId,
                name: data.get("name"),
                phone: data.get("phone"),
                business: data.get("business"),
                plan: data.get("plan") || "No plan yet",
              });
            if (profileError) {
              signupError.textContent = profileError.message;
              return;
            }
          }
          if (signUpData.session) {
            window.location.href = "account.html";
          } else {
            const { error: signInError } =
              await window.supabaseClient.auth.signInWithPassword({
                email,
                password,
              });
            if (!signInError) {
              window.location.href = "account.html";
              return;
            }
            window.location.href = "account.html?pending=1";
          }
        });
      }

      if (googleSignupBtn) {
        googleSignupBtn.addEventListener("click", async () => {
          await window.supabaseClient.auth.signInWithOAuth({
            provider: "google",
            options: { redirectTo: `${window.location.origin}/account.html` },
          });
        });
      }

    </script>
    <script src="app.js"></script>
  </body>
</html>
